# Using Sonatype and Signing with PGP

## Sonatype
One way to upload a project to Maven is to use OSSRH (Open Source Software Repository Hosting) hosted by [Sonatype](https://central.sonatype.org/pages/ossrh-guide.html). This requires [creating an account](https://issues.sonatype.org/secure/Signup!default.jspa), and then [opening a New Project ticket](https://issues.sonatype.org/secure/CreateIssue.jspa?issuetype=21&pid=10134). While creating the ticket, you will have to provide a title and description, as well as a link to your project and its source control system. It is useful to have your project on GitHub or a similar site for this to work well. For example, if one were to upload this repository, the Project URL would be https://github.com/huskydj1/Publishing-to-Maven-Central_Explanation, and the SCM URL would be https://github.com/huskydj1/Publishing-to-Maven-Central_Explanation.git. The `.git` at the end directs it to the git source control for the project, if you are using GitHub. The group ID should be consistent with whatever group ID you have used throughout the project. Finally, the radio button selection "Already Synced to Central" asks whether your project is already on Maven Central. Typically, the answer should be no.

Once you have submitted the issue, a Sonatype employee will have to manually approve it. Their comments will appear on the page you are redirected to once you submit the issue. They may ask you to verify ownership of your GitHub account by creating a repsitory on that account with a specific name. You should make the repository with the specified name, and ensure it is public. It does not need to have any content. Once the employee sees account verification and sees no problems, they will mark the issue as "resolved," which means they are ready for you to deploy it.

## PGP Signatures
OpenPGP (PGP means "Pretty Good Privacy") describes the standards for a secure signature program. GPG or GnuPG is an example of one of these programs, and can be downloaded [here](https://www.gnupg.org/download/). Signing documents with GPG basically means that other people can then verify that the contents of the document have not been tampered with. For security reasons, Maven requires all packages that go to Maven Central Repository to be signed. Signing documents can be a multi-step process, but your `pom.xml` file should already contain a plugin that will make this process easier, if you have been following this guide. 

1. First, if you have not already done so, download GPG. You can verify that it is downloaded by running `gpg --version` on your command line.
2. Next, you need to generate a key pair. This can be done with `gpg --gen-key` on your command line. Be sure to input your name, email, and any other information when prompted. It will also ask you for a passphrase, which can be anything secure that you will remember.
3. Your public key needs to be shared to a key server, like http://pgp.mit.edu/, so that others can verify the contents of the files you sign. 
    1. Find the Key ID: run `gpg2 --list-keys`, and identify the hexadecimal string (likely before the date). There may be 5 characters, a slash, then several more characters. Only copy the continuous hex characters after the slash.
    2. run `gpg2 --keyserver [KEY SERVER ADDRESS] --send-keys [KEY ID]` to share the public key (replace the brackets and text within them)
4. Finally, the plugin you added to your `pom.xml` file (if you have been following this guide) will ensure your package will get signed when you deploy it, but it's important to remember it will prompt you for your private passphrase at that time.